<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <title>TRAGAPERRAS DANI</title>
 <style>
 @import url('https://fonts.googleapis.com/css2?family=VT323&family=Orbitron:wght@500;700&display=swap');

 body {
 margin: 0;
 min-height: 100vh;
 background: radial-gradient(circle at 50% 15%, #220044, #0a0015 70%);
 color: #0f0;
 font-family: 'VT323', monospace;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 overflow-x: hidden;
 user-select: none;
 padding: 15px;
 }

 h1 {
 font-family: 'Orbitron', sans-serif;
 font-size: clamp(3.2rem, 9vw, 5.2rem);
 color: #ff0066;
 text-shadow: 0 0 24px #ff0066, 0 0 48px #ff0066;
 margin: 10px 0 8px;
 letter-spacing: 4px;
 }

 .credits {
 font-size: clamp(2rem, 6vw, 3.2rem);
 color: #ffff00;
 text-shadow: 0 0 20px #ffff00;
 margin: 0 0 25px;
 }

 .slot-machine {
 position: relative;
 display: flex;
 gap: 16px;
 background: #0f0f1a;
 padding: 30px 40px;
 border: 10px solid #222;
 border-radius: 24px;
 box-shadow: 0 0 90px rgba(180,0,80,0.45), inset 0 0 30px rgba(0,0,0,0.9);
 }

 .reel {
 width: 160px;
 height: 210px;
 background: #000;
 border: 7px solid #333;
 border-radius: 16px;
 overflow: hidden;
 position: relative;
 box-shadow: inset 0 0 25px #000;
 }

 .reel-inner {
 position: absolute;
 inset: 0;
 transition: transform 0.07s linear;
 will-change: transform;
 }

 .symbol {
 height: 210px;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 140px;
 text-shadow: 0 0 30px currentColor;
 }

 .payline {
 position: absolute;
 top: 50%;
 left: -60px; right: -60px;
 height: 10px;
 background: linear-gradient(90deg, transparent, #ffff00, #ffea00, #ffff00, transparent);
 transform: translateY(-50%);
 box-shadow: 0 0 70px #ffff00;
 opacity: 0;
 pointer-events: none;
 transition: opacity 0.6s;
 }

 .controls {
 margin: 30px 0;
 display: flex;
 flex-wrap: wrap;
 gap: 24px;
 justify-content: center;
 }

 button {
 padding: 14px 42px;
 font-size: clamp(1.6rem, 4.5vw, 2.3rem);
 border: none;
 border-radius: 14px;
 cursor: pointer;
 transition: all 0.18s;
 font-family: 'VT323', monospace;
 }

 #spin {
 background: #b70000;
 color: white;
 box-shadow: 0 0 35px #c00;
 }

 #spin:hover:not(:disabled) {
 background: #e60000;
 transform: scale(1.07);
 box-shadow: 0 0 50px #f00;
 }

 #work {
 background: #006600;
 color: #fff;
 box-shadow: 0 0 35px #0a0;
 }

 #work:hover:not(:disabled) {
 background: #008800;
 transform: scale(1.09);
 box-shadow: 0 0 55px #0f0;
 }

 button:disabled {
 background: #333 !important;
 color: #555 !important;
 cursor: not-allowed;
 transform: none !important;
 }

 #result {
 font-size: clamp(1.9rem, 5vw, 2.7rem);
 min-height: 3.5rem;
 text-align: center;
 text-shadow: 0 0 18px currentColor;
 margin-top: 15px;
 }

 .win-jackpot { color: #ffff00; animation: glow 1.1s infinite alternate; }
 .win-good { color: #00ff99; animation: glow 1.3s infinite alternate; }
 .win-small { color: #66ffcc; }
 .lose { color: #777; }

 @keyframes glow {
 from { text-shadow: 0 0 10px currentColor; }
 to { text-shadow: 0 0 55px currentColor; }
 }

 @media (max-width: 520px) {
 .slot-machine { padding: 20px 25px; gap: 10px; }
 .reel { width: 120px; height: 160px; }
 .symbol { font-size: 100px; height: 160px; }
 .payline { left: -40px; right: -40px; }
 }
 </style>
</head>
<body>

<h1>TRAGAPERRAS DANI</h1>
<div class="credits">SALDO: <span id="coins">50.00</span> ‚Ç¨</div>

<div class="slot-machine">
 <div class="reel"><div class="reel-inner" id="reel1"></div></div>
 <div class="reel"><div class="reel-inner" id="reel2"></div></div>
 <div class="reel"><div class="reel-inner" id="reel3"></div></div>
 <div class="payline" id="payline"></div>
</div>

<div class="controls">
 <button id="work">Trabajar (+2.50 ‚Ç¨)</button>
 <button id="spin">Tirar - 1.20 ‚Ç¨</button>
</div>

<div id="result"></div>

<script>
const symbols = ['üçí','üçã','üçä','üçá','üîî','‚≠ê','üé∞','üíé','üçâ','üî•'];

const reels = [
 document.getElementById('reel1'),
 document.getElementById('reel2'),
 document.getElementById('reel3')
];

const spinBtn = document.getElementById('spin');
const workBtn = document.getElementById('work');
const coinsEl = document.getElementById('coins');
const resultEl = document.getElementById('result');
const payline = document.getElementById('payline');

let coins = 50.00;
let isSpinning = false;
let canWork = true;

const SYMBOL_HEIGHT = 210;
const COST_PER_SPIN = 1.20;
const WORK_REWARD = 2.50;
const WORK_COOLDOWN = 8000; // ms

function updateCoins() {
 coinsEl.textContent = coins.toFixed(2);
 spinBtn.disabled = coins < COST_PER_SPIN || isSpinning;
}

function playBeep(freq, dur = 70) {
 try {
 const ctx = new (window.AudioContext || window.webkitAudioContext)();
 const osc = ctx.createOscillator();
 osc.type = 'square';
 osc.frequency.value = freq;
 osc.connect(ctx.destination);
 osc.start();
 osc.stop(ctx.currentTime + dur/1000);
 } catch {}
}

function createReelContent() {
 let html = '';
 for (let i = 0; i < 180; i++) {
 html += `<div class="symbol">${symbols[Math.floor(Math.random() * symbols.length)]}</div>`;
 }
 return html + html;
}

reels.forEach(reel => {
 reel.innerHTML = createReelContent();
 reel.style.transform = `translateY(-${SYMBOL_HEIGHT}px)`;
});

function spin() {
 if (isSpinning || coins < COST_PER_SPIN) return;
 isSpinning = true;
 spinBtn.disabled = true;
 coins -= COST_PER_SPIN;
 updateCoins();
 spinBtn.textContent = "GIRANDO...";
 resultEl.textContent = "";
 resultEl.className = "";
 payline.style.opacity = "0";

 playBeep(180);

 const finalSymbols = Array(3).fill().map(() => symbols[Math.floor(Math.random() * symbols.length)]);
 const durations = [2.2, 2.8, 3.4];
 const minShifts = [45, 60, 75];

 reels.forEach((reel, i) => {
 const allSymbols = reel.querySelectorAll('.symbol');
 let possible = [];

 for (let j = 1; j < allSymbols.length - 1; j++) {
 if (allSymbols[j].textContent === finalSymbols[i]) possible.push(j);
 }

 let filtered = possible.filter(j => j >= minShifts[i]);
 let chosenIndex = filtered.length > 0
 ? filtered[Math.floor(Math.random() * filtered.length)]
 : (possible.length > 0 ? Math.max(...possible) : 20 + i * 12);

 const totalShift = chosenIndex * SYMBOL_HEIGHT;

 reel.style.transition = `transform ${durations[i]}s cubic-bezier(0.42, 0, 0.25, 1.1)`;
 reel.style.transform = `translateY(-${totalShift}px)`;

 setTimeout(() => {
 playBeep(480 + i * 140);
 if (i === 2) {
 setTimeout(() => {
 showResult(finalSymbols);
 isSpinning = false;
 spinBtn.disabled = coins < COST_PER_SPIN;
 spinBtn.textContent = `Tirar - ${COST_PER_SPIN.toFixed(2)} ‚Ç¨`;
 }, 700);
 }
 }, durations[i] * 1000 + 100);
 });
}

function showResult(syms) {
 const text = syms.join(' ');
 let prize = 0;
 let msg = '';
 let cls = 'lose';

 if (syms[0] === syms[1] && syms[1] === syms[2]) {
 payline.style.opacity = '1';
 switch (syms[0]) {
 case 'üçí': prize = 4; msg = ' ‚Üí ¬°3 Cerezas! +4.00 ‚Ç¨'; cls = 'win-small'; break;
 case 'üçã': prize = 3; msg = ' ‚Üí ¬°3 Limones! +3.00 ‚Ç¨'; cls = 'win-small'; break;
 case 'üçä': prize = 4; msg = ' ‚Üí ¬°3 Naranjas! +4.00 ‚Ç¨'; cls = 'win-small'; break;
 case 'üçá': prize = 6; msg = ' ‚Üí ¬°3 Uvas! +6.00 ‚Ç¨'; cls = 'win-good'; break;
 case 'üîî': prize = 8; msg = ' ‚Üí ¬°3 Campanas! +8.00 ‚Ç¨'; cls = 'win-good'; break;
 case 'üçâ': prize = 10; msg = ' ‚Üí ¬°3 Sand√≠as! +10.00 ‚Ç¨'; cls = 'win-good'; break;
 case 'üî•': prize = 15; msg = ' ‚Üí ¬°3 Fuegos! +15.00 ‚Ç¨'; cls = 'win-good'; break;
 case 'üé∞': prize = 25; msg = ' ‚Üí ¬°3 Slots! +25.00 ‚Ç¨'; cls = 'win-jackpot'; break;
 case '‚≠ê': prize = 40; msg = ' ‚Üí ¬°3 Estrellas! +40.00 ‚Ç¨'; cls = 'win-jackpot'; break;
 case 'üíé': prize = 80; msg = ' ‚Üí ¬°JACKPOT DIAMANTE! +80.00 ‚Ç¨'; cls = 'win-jackpot'; break;
 }
 }
 else if (syms[0] === syms[1] || syms[1] === syms[2] || syms[0] === syms[2]) {
 prize = 1.5;
 msg = ' ‚Üí Pareja ‚Üí +1.50 ‚Ç¨';
 cls = 'win-small';
 }
 else {
 msg = ' ... nada. ¬°Otra vez ser√°!';
 cls = 'lose';
 }

 coins += prize;
 resultEl.textContent = text + msg;
 resultEl.className = cls;
 updateCoins();

 if (prize > 0) playBeep(1100, 120);
}

workBtn.onclick = () => {
 if (!canWork) return;
 coins += WORK_REWARD;
 updateCoins();
 playBeep(700, 60);

 canWork = false;
 workBtn.disabled = true;
 workBtn.textContent = "Espera...";

 setTimeout(() => {
 canWork = true;
 workBtn.disabled = false;
 workBtn.textContent = `Trabajar (+${WORK_REWARD.toFixed(2)} ‚Ç¨)`;
 }, WORK_COOLDOWN);
};

spinBtn.addEventListener('click', spin);
updateCoins();
</script>
</body>
</html>